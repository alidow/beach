# beach tmux parity checklist

## Scrollback timeline
- `TerminalGrid` now grows monotonically from session row `0`; rows are never recycled. History writes are emitted verbatim so clients share a single absolute index space.
- `server::terminal::AlacrittyEmulator` keeps 100 k lines of Alacritty scrollback enabled and translates damage events using absolute row numbers.
- `TerminalSync` snapshot + delta lanes stream the current viewport first, then progressively backfill the remaining history (see the new `client_streams_scrollback_history` integration test).

## Copy mode UX
- Copy-mode enters on `Ctrl-B [` or the first mouse wheel event. Cursor starts at the bottom of the live viewport; follow-tail is disabled while active.
- Navigation: `hjkl` / arrows move per cell, `PgUp/PgDn` jump by a viewport page, `g/G` jump to top/bottom, `0`/`$` hit line edges.
- Word motions: `w/W`, `b/B`, and `e/E` mirror tmux’ default word traversal (ASCII + `_` word definition).
- Selection: `Space` or `v` begins character selection, `V` promotes to whole-line selection. The renderer keeps the underlying fg/bg colours and overlays tmux-style reversed video.
- Clipboard: `y`/`Y` yank to the system clipboard (via `copypasta`) and exit copy-mode. `Ctrl-C` or `Esc` cancel.

## Search workflow
- `/` and `?` open incremental prompts rendered in the status line; type to build the pattern, `Enter` executes, `Esc` cancels. Matches jump the cursor to the first/last character. `n` and `N` repeat the last search in the same or opposite direction.
- When no match exists the status line reports `not found: <pattern>` without leaving copy-mode.

## Mouse integration
- Mouse capture is enabled while the TUI is active. Scroll events enter copy-mode (if not already) and page the viewport by three lines per tick, keeping the logical cursor in view.

## Tests and fixtures
- `apps/beach/tests/client_transcripts.rs::client_streams_scrollback_history` exercises history-lane snapshots so regressions surface under `cargo test -p beach`.
- Future transcript-driven coverage can extend `tests/client_transcripts.rs` with tmux captures; the renderer understands absolute row indices so fixtures can be generated by replaying tmux logs verbatim.

Keep this document in sync as additional tmux features (rectangular selection, custom key tables, etc.) land.
